<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Motor Hut - Premium Automotive Excellence</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Montserrat:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --black: #0D0D0D;
            --matte-black: #1A1A1A;
            --darker-black: #0A0A0A;
            --red: #C9A961;
            --red-dark: #B8941F;
            --red-glow: rgba(201, 169, 97, 0.3);
            --white: #FFFFFF;
            --off-white: #F5F5F5;
            --gray: #A1A1A1;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Montserrat', sans-serif;
            background: var(--black);
            color: var(--off-white);
            overflow-x: hidden;
        }

        nav {
            position: fixed;
            top: 0;
            width: 100%;
            background: rgba(13, 13, 13, 0.98);
            backdrop-filter: blur(10px);
            padding: 1.5rem 5%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 1000;
            border-bottom: 1px solid rgba(201, 169, 97, 0.2);
        }

        .logo {
            font-family: 'Playfair Display', serif;
            font-size: 2rem;
            font-weight: 700;
            letter-spacing: 2px;
            color: var(--red);
            text-shadow: 0 0 20px var(--red-glow);
        }

        .nav-links {
            display: flex;
            gap: 3rem;
            list-style: none;
        }

        .nav-links a {
            color: var(--off-white);
            text-decoration: none;
            font-weight: 400;
            font-size: 0.95rem;
            letter-spacing: 1px;
            transition: all 0.3s ease;
            position: relative;
        }

        .nav-links a::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--red);
            transition: width 0.3s ease;
        }

        .nav-links a:hover::after {
            width: 100%;
        }

        .nav-contact {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .contact-item {
            color: var(--gray);
            font-size: 0.85rem;
        }

        .hero {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 8rem 5% 4rem;
            position: relative;
            overflow: hidden;
            background: linear-gradient(135deg, var(--black) 0%, var(--darker-black) 100%);
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            right: -10%;
            width: 60%;
            height: 100%;
            background: radial-gradient(circle at center, var(--red-glow) 0%, transparent 70%);
            animation: pulse 8s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 0.3; }
            50% { transform: scale(1.1); opacity: 0.6; }
        }

        .hero-content {
            flex: 1;
            max-width: 600px;
            z-index: 1;
        }

        .hero-eyebrow {
            color: var(--red);
            font-size: 0.9rem;
            letter-spacing: 3px;
            text-transform: uppercase;
            font-weight: 500;
            margin-bottom: 1.5rem;
            opacity: 0;
            animation: fadeInUp 0.8s ease forwards;
        }

        .hero-title {
            font-family: 'Playfair Display', serif;
            font-size: 4.5rem;
            font-weight: 700;
            line-height: 1.1;
            margin-bottom: 1.5rem;
            opacity: 0;
            animation: fadeInUp 0.8s ease 0.2s forwards;
        }

        .hero-title span {
            color: var(--red);
            text-shadow: 0 0 30px var(--red-glow);
        }

        .hero-description {
            font-size: 1.15rem;
            color: var(--gray);
            line-height: 1.8;
            margin-bottom: 3rem;
            opacity: 0;
            animation: fadeInUp 0.8s ease 0.4s forwards;
        }

        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
            from {
                opacity: 0;
                transform: translateY(20px);
            }
        }

        .hero-buttons {
            display: flex;
            gap: 1.5rem;
            opacity: 0;
            animation: fadeInUp 0.8s ease 0.6s forwards;
        }

        .btn-primary {
            padding: 1.2rem 3rem;
            background: var(--red);
            color: var(--white);
            border: none;
            border-radius: 4px;
            font-weight: 600;
            font-size: 0.95rem;
            letter-spacing: 1px;
            text-transform: uppercase;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }

        .btn-primary:hover {
            background: var(--red-dark);
            transform: translateY(-2px);
            box-shadow: 0 10px 30px var(--red-glow);
        }

        .btn-secondary {
            padding: 1.2rem 3rem;
            background: transparent;
            color: var(--red);
            border: 2px solid var(--red);
            border-radius: 4px;
            font-weight: 600;
            font-size: 0.95rem;
            letter-spacing: 1px;
            text-transform: uppercase;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }

        .btn-secondary:hover {
            background: var(--red);
            color: var(--white);
        }

        .hero-image {
            flex: 1;
            display: flex;
            justify-content: center;
            opacity: 0;
            animation: fadeIn 1s ease 0.8s forwards;
        }

        @keyframes fadeIn {
            to { opacity: 1; }
        }

        .search-section {
            padding: 3rem 5%;
            background: var(--matte-black);
            border-top: 1px solid rgba(201, 169, 97, 0.2);
            border-bottom: 1px solid rgba(201, 169, 97, 0.2);
        }

        .search-container {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            align-items: end;
        }

        .search-field label {
            color: var(--red);
            font-size: 0.85rem;
            letter-spacing: 1px;
            text-transform: uppercase;
            font-weight: 500;
            display: block;
            margin-bottom: 0.5rem;
        }

        .search-field select,
        .search-field input {
            width: 100%;
            padding: 1rem;
            background: var(--darker-black);
            border: 1px solid rgba(201, 169, 97, 0.3);
            border-radius: 4px;
            color: var(--off-white);
            font-family: 'Montserrat', sans-serif;
        }

        .btn-search {
            width: 100%;
            padding: 1rem 2rem;
            background: var(--red);
            color: var(--white);
            border: none;
            border-radius: 4px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-search:hover {
            background: var(--red-dark);
        }

        .featured-section {
            padding: 6rem 5%;
            background: var(--black);
        }

        .section-title {
            font-family: 'Playfair Display', serif;
            font-size: 3rem;
            text-align: center;
            margin-bottom: 3rem;
            color: var(--red);
        }

        .cars-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 2rem;
            max-width: 1400px;
            margin: 0 auto;
        }

        .car-card {
            background: var(--matte-black);
            border-radius: 8px;
            overflow: hidden;
            transition: all 0.3s ease;
            border: 1px solid rgba(201, 169, 97, 0.2);
        }

        .car-card:hover {
            transform: translateY(-10px);
            border-color: var(--red);
            box-shadow: 0 20px 40px rgba(201, 169, 97, 0.2);
        }

        .car-image {
            width: 100%;
            height: 250px;
            background: var(--darker-black);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .car-details {
            padding: 2rem;
        }

        .car-title {
            font-family: 'Playfair Display', serif;
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
        }

        .car-price {
            color: var(--red);
            font-size: 1.8rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
        }

        .car-specs {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            margin-bottom: 1.5rem;
            padding-top: 1.5rem;
            border-top: 1px solid rgba(201, 169, 97, 0.2);
        }

        .spec-item {
            color: var(--gray);
            font-size: 0.9rem;
        }

        .btn-view {
            width: 100%;
            padding: 1rem;
            background: transparent;
            border: 1px solid var(--red);
            color: var(--red);
            border-radius: 4px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-view:hover {
            background: var(--red);
            color: var(--white);
        }

        /* Chat Widget */
        .chat-widget {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 9999;
        }

        .chat-button {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: var(--red);
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 20px var(--red-glow);
            transition: all 0.3s ease;
        }

        .chat-button:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 30px var(--red-glow);
        }

        .chat-button svg {
            width: 28px;
            height: 28px;
            fill: var(--white);
        }

        .chat-window {
            position: absolute;
            bottom: 80px;
            right: 0;
            width: 400px;
            height: 600px;
            background: var(--matte-black);
            border-radius: 12px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.8);
            display: none;
            flex-direction: column;
            border: 1px solid rgba(201, 169, 97, 0.3);
        }

        .chat-window.active {
            display: flex;
        }

        .chat-header {
            padding: 1.5rem;
            background: var(--darker-black);
            border-radius: 12px 12px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid rgba(201, 169, 97, 0.3);
        }

        .chat-header h3 {
            font-family: 'Playfair Display', serif;
            color: var(--red);
            font-size: 1.2rem;
        }

        .chat-close {
            background: none;
            border: none;
            color: var(--gray);
            font-size: 1.5rem;
            cursor: pointer;
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .chat-message {
            padding: 1rem;
            border-radius: 8px;
            max-width: 80%;
        }

        .chat-message.user {
            background: var(--red);
            color: var(--white);
            margin-left: auto;
        }

        .chat-message.assistant {
            background: var(--darker-black);
            border: 1px solid rgba(201, 169, 97, 0.3);
        }

        .chat-input-area {
            padding: 1rem 1.5rem;
            border-top: 1px solid rgba(201, 169, 97, 0.3);
            display: flex;
            gap: 0.75rem;
        }

        .chat-input {
            flex: 1;
            padding: 0.75rem;
            background: var(--darker-black);
            border: 1px solid rgba(201, 169, 97, 0.3);
            border-radius: 4px;
            color: var(--off-white);
            font-family: 'Montserrat', sans-serif;
        }

        .chat-send {
            padding: 0.75rem 1.5rem;
            background: var(--red);
            border: none;
            border-radius: 4px;
            color: var(--white);
            font-weight: 600;
            cursor: pointer;
        }

        @media (max-width: 768px) {
            .nav-links, .nav-contact {
                display: none;
            }

            .hero {
                flex-direction: column;
                text-align: center;
            }

            .hero-title {
                font-size: 3rem;
            }

            .chat-window {
                width: calc(100vw - 40px);
            }
        }
    </style>
</head>
<body>
    <nav>
        <div class="logo">MOTOR HUT</div>
        <ul class="nav-links">
            <li><a href="index.html">Home</a></li>
            <li><a href="#inventory">Inventory</a></li>
            <li><a href="services.html">Services</a></li>
            <li><a href="about.html">About</a></li>
            <li><a href="contact.html">Contact</a></li>
        </ul>
        <div class="nav-contact">
            <span class="contact-item">üìç Argwings Kodhek Rd, Nairobi</span>
            <span class="contact-item">üìû +254 72 363 6787</span>
        </div>
    </nav>

    <section class="hero">
        <div class="hero-content">
            <div class="hero-eyebrow">Premium Automotive Excellence</div>
            <h1 class="hero-title">Drive Your <span>Dream</span> Today</h1>
            <p class="hero-description">
                Discover an exclusive collection of premium vehicles meticulously curated for discerning drivers. 
                Experience luxury, performance, and unparalleled service.
            </p>
            <div class="hero-buttons">
                <a href="#inventory" class="btn-primary">Explore Inventory</a>
                <a href="contact.html" class="btn-secondary">Schedule Visit</a>
            </div>
        </div>
        <div class="hero-image">
            <svg width="500" height="300" viewBox="0 0 500 300">
                <rect x="50" y="100" width="400" height="120" rx="10" fill="#1A1A1A" opacity="0.5"/>
                <circle cx="150" cy="220" r="30" fill="#C9A961" opacity="0.3"/>
                <circle cx="350" cy="220" r="30" fill="#C9A961" opacity="0.3"/>
            </svg>
        </div>
    </section>

    <section class="search-section">
        <div class="search-container">
            <div class="search-field">
                <label>Make</label>
                <select id="make">
                    <option>Any Make</option>
                    <option>Toyota</option>
                    <option>Mercedes-Benz</option>
                    <option>BMW</option>
                </select>
            </div>
            <div class="search-field">
                <label>Model</label>
                <select id="model">
                    <option>Any Model</option>
                </select>
            </div>
            <div class="search-field">
                <label>Max Price</label>
                <input type="number" placeholder="5,000,000" id="maxPrice">
            </div>
            <div class="search-field">
                <button class="btn-search">Search</button>
            </div>
        </div>
    </section>

    <section class="featured-section" id="inventory">
        <h2 class="section-title">Featured Vehicles</h2>
        <div class="cars-grid" id="carsGrid"></div>
    </section>

    <div class="chat-widget">
        <button class="chat-button" onclick="toggleChat()">
            <svg viewBox="0 0 24 24">
                <path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z"/>
            </svg>
        </button>
        <div class="chat-window" id="chatWindow">
            <div class="chat-header">
                <h3>AI Assistant</h3>
                <button class="chat-close" onclick="toggleChat()">√ó</button>
            </div>
            <div class="chat-messages" id="chatMessages">
                <div class="chat-message assistant">
                    Hello! I'm your Motor Hut AI assistant. How can I help you today?
                </div>
            </div>
            <div class="chat-input-area">
                <input type="text" class="chat-input" id="chatInput" placeholder="Ask me anything...">
                <button class="chat-send" onclick="sendMessage()">Send</button>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script>
        const SUPABASE_URL = 'https://fappwzziqocmwqohyokl.supabase.co';
        const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZhcHB3enppcW9jbXdxb2h5b2tsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njk4MjQ5ODgsImV4cCI6MjA4NTQwMDk4OH0.LM857N5L_7YiaVdjlswVZFV53tcy2NZaYv2ccQwAt3o';
        const { createClient } = supabase;
        const supabaseClient = createClient(SUPABASE_URL, SUPABASE_KEY);
        const HF_KEY = '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';

        let conversationHistory = [];

        document.addEventListener('DOMContentLoaded', loadCars);

        async function loadCars() {
            const { data: cars, error } = await supabaseClient
                .from('cars')
                .select('*')
                .eq('status', 'available')
                .limit(6);

            if (error || !cars || cars.length === 0) {
                const placeholders = [
                    { make: 'Toyota', model: 'Land Cruiser', year: 2023, price: 8500000, mileage: 15000, transmission: 'Automatic', fuel: 'Diesel' },
                    { make: 'Mercedes-Benz', model: 'E-Class', year: 2022, price: 6800000, mileage: 25000, transmission: 'Automatic', fuel: 'Petrol' },
                    { make: 'BMW', model: 'X5', year: 2023, price: 7200000, mileage: 12000, transmission: 'Automatic', fuel: 'Hybrid' },
                ];
                displayCars(placeholders);
                return;
            }
            displayCars(cars);
        }

        function displayCars(cars) {
            const grid = document.getElementById('carsGrid');
            grid.innerHTML = cars.map(car => `
                <div class="car-card">
                    <div class="car-image">
                        <svg width="100%" height="100%" viewBox="0 0 400 250">
                            <rect width="400" height="250" fill="#0A0A0A"/>
                            <rect x="50" y="80" width="300" height="90" rx="5" fill="#1A1A1A"/>
                            <circle cx="120" cy="170" r="25" fill="#C9A961" opacity="0.3"/>
                            <circle cx="280" cy="170" r="25" fill="#C9A961" opacity="0.3"/>
                        </svg>
                    </div>
                    <div class="car-details">
                        <h3 class="car-title">${car.make} ${car.model}</h3>
                        <div class="car-price">KES ${(car.price || 0).toLocaleString()}</div>
                        <div class="car-specs">
                            <div class="spec-item">üìÖ ${car.year || 2023}</div>
                            <div class="spec-item">‚ö° ${car.transmission || 'Automatic'}</div>
                            <div class="spec-item">üìä ${(car.mileage || 0).toLocaleString()} km</div>
                            <div class="spec-item">‚õΩ ${car.fuel || 'Petrol'}</div>
                        </div>
                        <button class="btn-view">View Details</button>
                    </div>
                </div>
            `).join('');
        }

        function toggleChat() {
            document.getElementById('chatWindow').classList.toggle('active');
        }

        async function sendMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            if (!message) return;

            const messagesDiv = document.getElementById('chatMessages');
            
            messagesDiv.innerHTML += `<div class="chat-message user">${message}</div>`;
            input.value = '';
            messagesDiv.scrollTop = messagesDiv.scrollHeight;

            conversationHistory.push({ role: 'user', content: message });

            try {
                const response = await fetch('https://api-inference.huggingface.co/models/meta-llama/Llama-3.2-3B-Instruct', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${HF_KEY}`
                    },
                    body: JSON.stringify({
                        inputs: `You are a professional car sales assistant for Motor Hut dealership in Nairobi. Help customers with car inquiries. Be helpful and professional. Never say "I'm here to help" or give phone numbers unless specifically asked. Answer their question directly.\n\nCustomer: ${message}\nAssistant:`,
                        parameters: {
                            max_new_tokens: 150,
                            temperature: 0.7,
                            return_full_text: false
                        }
                    })
                });

                const data = await response.json();
                let reply = 'I apologize, but I need a moment. Please try again.';
                
                if (Array.isArray(data) && data[0]?.generated_text) {
                    reply = data[0].generated_text.trim();
                }

                messagesDiv.innerHTML += `<div class="chat-message assistant">${reply}</div>`;
                conversationHistory.push({ role: 'assistant', content: reply });
                
            } catch (error) {
                messagesDiv.innerHTML += `<div class="chat-message assistant">I'm experiencing connection issues. Please call us at +254 72 363 6787 or email motorhutltd@gmail.com</div>`;
            }

            messagesDiv.scrollTop = messagesDiv.scrollHeight;
        }

        document.getElementById('chatInput')?.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') sendMessage();
        });
    </script>
</body>
</html>
